{"version":3,"file":"index.js","sources":["../src/utils.js","../src/Tippy.js","../src/TippyGroup.js"],"sourcesContent":["export const isBrowser =\n  typeof window !== 'undefined' && typeof document !== 'undefined'\n\nexport function preserveRef(ref, node) {\n  if (ref) {\n    if (typeof ref === 'function') {\n      ref(node)\n    }\n    if ({}.hasOwnProperty.call(ref, 'current')) {\n      ref.current = node\n    }\n  }\n}\n\nexport function ssrSafeCreateDiv() {\n  return isBrowser && document.createElement('div')\n}\n\nexport function updateClassName(tooltip, action, classNames) {\n  classNames.split(/\\s+/).forEach(name => {\n    if (name) {\n      tooltip.classList[action](name)\n    }\n  })\n}\n","import React, {\n  forwardRef,\n  cloneElement,\n  useState,\n  useRef,\n  useEffect,\n  useLayoutEffect,\n} from 'react'\nimport { createPortal } from 'react-dom'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\nimport {\n  isBrowser,\n  ssrSafeCreateDiv,\n  preserveRef,\n  updateClassName,\n} from './utils'\n\n// React currently throws a warning when using useLayoutEffect on the server. To\n// get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser. We need useLayoutEffect because we want Tippy\n// to perform sync mutations to the DOM elements after renders to prevent\n// jitters/jumps, especially when updating content.\nconst useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect\n\nfunction Tippy({\n  children,\n  content,\n  className,\n  onCreate,\n  isVisible, // deprecated\n  isEnabled, // deprecated\n  visible,\n  enabled,\n  ignoreAttributes = true,\n  multiple = true,\n  ...restOfNativeProps\n}) {\n  // `isVisible` / `isEnabled` renamed to `visible` / `enabled`\n  enabled =\n    enabled !== undefined ? enabled : isEnabled !== undefined ? isEnabled : true\n  visible = visible !== undefined ? visible : isVisible\n\n  const [mounted, setMounted] = useState(false)\n  const containerRef = useRef(ssrSafeCreateDiv())\n  const targetRef = useRef()\n  const instanceRef = useRef()\n  const isControlledMode = visible !== undefined\n\n  const options = {\n    ignoreAttributes,\n    multiple,\n    ...restOfNativeProps,\n    content: containerRef.current,\n  }\n\n  if (isControlledMode) {\n    options.trigger = 'manual'\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    instanceRef.current = tippy(targetRef.current, options)\n\n    if (onCreate) {\n      onCreate(instanceRef.current)\n    }\n\n    if (!enabled) {\n      instanceRef.current.disable()\n    }\n\n    if (visible) {\n      instanceRef.current.show()\n    }\n\n    setMounted(true)\n\n    return () => {\n      instanceRef.current.destroy()\n      instanceRef.current = null\n    }\n  }, [])\n\n  useIsomorphicLayoutEffect(() => {\n    if (!mounted) {\n      return\n    }\n\n    instanceRef.current.set(options)\n\n    if (enabled) {\n      instanceRef.current.enable()\n    } else {\n      instanceRef.current.disable()\n    }\n\n    if (isControlledMode) {\n      if (visible) {\n        instanceRef.current.show()\n      } else {\n        instanceRef.current.hide()\n      }\n    }\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (className) {\n      const { tooltip } = instanceRef.current.popperChildren\n      updateClassName(tooltip, 'add', className)\n      return () => {\n        updateClassName(tooltip, 'remove', className)\n      }\n    }\n  }, [className])\n\n  return (\n    <>\n      {cloneElement(children, {\n        ref: node => {\n          targetRef.current = node\n          preserveRef(children.ref, node)\n        },\n      })}\n      {mounted && createPortal(content, containerRef.current)}\n    </>\n  )\n}\n\nTippy.propTypes = {\n  content: PropTypes.oneOfType([PropTypes.string, PropTypes.element])\n    .isRequired,\n  children: PropTypes.element.isRequired,\n  onCreate: PropTypes.func,\n  isVisible: PropTypes.bool, // deprecated\n  isEnabled: PropTypes.bool, // deprecated\n  visible: PropTypes.bool,\n  enabled: PropTypes.bool,\n  className: PropTypes.string,\n}\n\nexport default forwardRef(function TippyWrapper({ children, ...props }, ref) {\n  return (\n    <Tippy {...props}>\n      {cloneElement(children, {\n        ref: node => {\n          preserveRef(ref, node)\n          preserveRef(children.ref, node)\n        },\n      })}\n    </Tippy>\n  )\n})\n","import { Children, cloneElement, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\n\nexport default function TippyGroup({ children, ...props }) {\n  const instancesRef = useRef([])\n\n  useEffect(() => {\n    tippy.group(instancesRef.current, props)\n  })\n\n  return Children.map(children, child => {\n    return cloneElement(child, {\n      onCreate: instance => {\n        if (child.props.onCreate) {\n          child.props.onCreate(instance)\n        }\n        instancesRef.current.push(instance)\n      },\n    })\n  })\n}\n\nTippyGroup.propTypes = {\n  children: PropTypes.arrayOf(PropTypes.element).isRequired,\n}\n"],"names":["isBrowser","window","document","preserveRef","ref","node","hasOwnProperty","call","current","ssrSafeCreateDiv","createElement","updateClassName","tooltip","action","classNames","split","forEach","name","classList","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","Tippy","children","content","className","onCreate","isVisible","isEnabled","visible","enabled","ignoreAttributes","multiple","restOfNativeProps","undefined","useState","mounted","setMounted","containerRef","useRef","targetRef","instanceRef","isControlledMode","options","trigger","tippy","disable","show","destroy","set","enable","hide","popperChildren","cloneElement","createPortal","propTypes","PropTypes","oneOfType","string","element","isRequired","func","bool","forwardRef","TippyWrapper","props","TippyGroup","instancesRef","group","Children","map","child","instance","push","arrayOf"],"mappings":"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"}